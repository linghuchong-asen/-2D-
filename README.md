# 周界2D

## 待办

* [X] 登录功能
* [X] 工程搭建
* [X] 静态页面
* [X] 页面布局
* [X] 实时告警静态部分
* [X] 实时告警引入真实数据
* [X] 实时告警滚动条
* [X] 实时告警5秒没有推送数据，删除该条告警
* [X] 实时告警，超出内容在tabs页的内容区域出现滚动条
* [X] 实时告警增加IO告警类型
* [ ] 实时告警删除间隔时间初始值5秒，可以由用户设置；到时做一个全局状态
* [ ] 实时告警单击，显示黄色边框，自动播放视频
* [ ] 实时告警自动轮播
* [ ] 实时告警双击，显示红色边框，不执行删除操作
* [ ] 历史告警，告警查询
* [X] 比例尺
* [X] 点坐标
* [ ] 地图全屏切换
* [X] 瓦片地图
* [ ] 点击符号弹窗
* [ ] 联动播放视频
* [ ] 地图资源列表
* [ ] 地图防区管理
* [X] 视频服务
* [X] 地图服务
* [X] 配置服务
* [X] 防区状态和设备状态，父组件控制echarts重新渲染
* [ ] 摄像机列表
* [ ] 用户-交班
* [ ] 用户-锁定界面
* [ ] 操作日志
* [ ] 设备日志
* [ ] 系统配置
* [ ] 帮助
* [ ] 关于
* [ ] websocket重连程序
* [ ] 部署
* [ ] history历史模式，服务器配置

## 逻辑说明

* 实时告警单击，出现黄色边框，黄色边框消失的条件：

  1.点击其他实时告警信息

  2.达到播放时间，自动播放下一条告警信息

  3.点击地图上雷达，播放视频
* 实时告警，视频播放逻辑：告警关联是雷达，一个雷达会有多个摄像头，一条告警就会对应多个摄像头（多个视频墙播放窗格）；

  当轮到下一个告警时，把上一条告警的视频全部关闭，播放新的告警雷达关联的相机视频；												在地图上只有相机有播放视频的选项，播放相机视频只占用视频墙一个窗格；														当一条报警持续发生，也会自动播放下一条告警；没有下一条告警时，当前报警消失之后，视频墙恢复封面状态
* 实时告警双击，出现红色边框，红色边框消失的条件：

  1.双击告警信息，出现处置报警窗口（是一个表单）

  2.当提交表单，后端会返回信息；判断状态码是否为200
* 如何根据告警信息获取到关联的摄像机：根据防区id查询相机
* 如何控制视频墙多个窗口同时播放？同时关闭？PlayerWallProcessorl类下play和closePlay方法分别是控制视频播放和关闭
* 根据防区id来确定是一个报警，如果相同则只增加读秒
* 实时报警后端推送的AlarmInfos为什么采用数组方式储存，因为之前是如果同时出现两个目标在AlarmInfos中增加对象，现在是直接多推送一个对象
* 显示轨迹和目标追踪调用地图中的哪个方法？
* 报警读秒增加怎么实现？答：分成setTimeout与watchEffect两部分逻辑
* 实时报警播放视频，是不是从当前时间开始播放视频？答：是从当前时间开始播放。这样播放持续多长时间？可以设置，默认15秒。累加的告警多了，等到后面的告警也是从当前时间播放会不会就延迟了？答：这种情况就不管了
* 为什么会有5秒自动删除告警功能，这样用户有段时间没有看屏幕，也自动消失就会出现这段时间什么事都没有发生的假象？

  答：如果没有自动删除的功能，用户不处理告警的时间太长的话有可能出现的告警特别多，有可能让浏览器内存崩溃的风险（当然我认为

  是一种极端的情况，紧紧是储存的文字，这得多大的量级才会引起浏览器崩溃）
* 播放历史视频怎么实现的？

  答：playHisSelect（id, start_time, end_time）方法用于播放历史视频，弹窗用于查询历史告警，调用防区管理中的历史告警接口；返回的信息中有开始时间和结束时间
* 防区管理

  答：实现一个查询+改变布防，撤防，旁路，三种状态。只实现客户端中的防区管理的状态功能
* 防区计划

  答：分页获取防区返回的有个planned字段，当planned = null 时，是7*24小时（没有计划默认布防）；有值时，拿着值访问获取指定防区计划接口
